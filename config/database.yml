# You'll need to configure this file for the appropriate environment before
# you run GloboDns

development:
  adapter:  mysql2
  database: <%= ENV.fetch('DB_NAME', 'globodns') %>
  host:     <%= ENV.fetch('DB_HOST', 'localhost') %>
  username: <%= ENV.fetch('DB_USERNAME', 'root') %>
  password: <%= ENV['DB_PASSWORD'] %>

# Warning: The database defined as 'test' will be erased and
# re-generated from your development database when you run 'rake'.
# Do not set this db to the same as development or production.
test:
  adapter:  mysql2
  database: <%= ENV.fetch('DB_NAME', 'globodns_test') %>
  host:     <%= ENV.fetch('DB_HOST', 'localhost') %>
  username: <%= ENV.fetch('DB_USERNAME', 'root') %>
  password: <%= ENV['DB_PASSWORD'] %>

production:
  adapter:  mysql2
  database: <%= ENV.fetch('DB_NAME', 'globodns_prod') %>
  <% db_socket = ENV['DB_SOCKET']
     if db_socket.nil?
  %>
  host:     <%= ENV.fetch('DB_HOST', 'localhost') %>
  <% else %>
  socket:   <%= db_socket %> #/var/lib/mysql/mysql.sock
  <% end %>
  username: <%= ENV.fetch('DB_USERNAME', 'root') %>
  password: <%= ENV['DB_PASSWORD'] %>

<%
  additional_environments = '/mnt/dbmigrate/globodns/globodns.yml'
  if File.readable?(additional_environments)
%>
<%= File.read(additional_environments) %>
<% else %>
# no file <%= additional_environments %>
<% end %>
